{% extends 'base_index.html' %}

{% block head %}
{{ super() }}
<style> 
    #navbar {
        top: -60px; /* Hide the navbar 60 px outside of the top view */
      }
</style>
<script id="mcjs">
    ! function (c, h, i, m, p) {
      m = c.createElement(h), p = c.getElementsByTagName(h)[0], m.async = 1, m.src = i, p.parentNode.insertBefore(m, p)
    }(document, "script",
      "https://chimpstatic.com/mcjs-connected/js/users/9fc96c0c089d4508de8f618a5/a064ee28e34f00ca929271c58.js");
  </script>
{% endblock %}



{% block container %}
{{ super() }}
<div class="page-header">
    <div class="row">
        <div class="col-xs-12 col-sm-12">
            <!-- H1 Title -->
            <h1>Data Science Challenge / Competition
                <!-- Begin Github star -->
                <iframe
                    src="https://ghbtns.com/github-btn.html?user=iphysresearch&repo=DataSciComp&type=star&count=true"
                    scrolling="0" width="170px" height="20px" frameborder="0"></iframe>
                <!-- End Github star -->
            </h1>
        </div>
        <div class="meta col-xs-12">
            <li>Countdowns to <b>ENTRY DEADLINE</b> of popular Data Science Challenges/Competitions.</li>
            <li>To add/update a challenge or any other advices to me, plesase don't hesitate and send in a
                <a target="_blank" href="https://github.com/iphysresearch/DataSciComp"
                    style="background-color:#CCFF66">pull request</a>.
            </li>
            <li>
                <a href="/DataSciComp/hostby.html" style="background-color:#CCFF66">Here</a> offer a list of links to
                various sources in which you may have an interest.
            </li>
            <li>Subscribe to our mailing list for news and updates! <a
                    href="https://iphysresearch.github.io/DataSciComp/update_log.xml"><img
                        src=".{{ url_for('.static', _external = False, filename='img/rss.gif') }}" width="36" height="14"></a></li>
        </div>
        <!-- Begin Mailchimp Signup Form -->
        <link href="//cdn-images.mailchimp.com/embedcode/slim-10_7.css" rel="stylesheet" type="text/css">
        <style type="text/css">
            #mc_embed_signup {
                background: #fff;
                clear: left;
                font: 14px Helvetica, Arial, sans-serif;
                width: 500px;
            }
            /* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
	   We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
        </style>
        <div id="mc_embed_signup" class="meta col-xs-12">
            <form
                action="https://github.us20.list-manage.com/subscribe/post?u=9fc96c0c089d4508de8f618a5&amp;id=fc48c9457c"
                method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate"
                target="_blank" novalidate>
                <div id="mc_embed_signup_scroll">
                    <!-- <label for="mce-EMAIL">Subscribe to our mailing list</label> -->
                    <!-- <li>Subscribe to our mailing list</li> -->
                    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address"
                        required>
                    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->
                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text"
                            name="b_9fc96c0c089d4508de8f618a5_fc48c9457c" tabindex="-1" value=""></div>
                    <div class="clear">
                        <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"
                            class="button">
                    </div>
                </div>
            </form>
        </div>
        <!--End mc_embed_signup-->
    </div>

    <br>
    <!-- Begin: checkbox -->
    <div class="row">
        <div class="col-xs-12">
            <!-- <form class="form-horizontal">
                <div class="form-group">
                    {% for id_checkbox in id_type_checkboxs %}
                    <div class="col-md-4 col-xs-5">
                        <div class="checkbox">
                            <label><input id="{{ id_checkbox.id }}" class="" type="checkbox"></input>
                                {{ id_checkbox.name }}
                            </label>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </form> -->
            <form class="form-horizontal">
                <div class="form-group">
                    {% for id_checkbox in id_type2_checkboxs %}
                    <div class="col-md-4 col-xs-5">
                        <div class="checkbox">
                            <label><input id="{{ id_checkbox.id }}" class="" type="checkbox"></input>
                                {{ id_checkbox.name }}
                            </label>
                        </div>
                    </div>
                    {% endfor %}
                    <div class="col-md-4 col-xs-5">
                        <div class="checkbox">
                            <label style="color:#FF0033"><input id="rewarded-checkbox" class="" type="checkbox"></input>
                                Rewards filter
                            </label>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- End: checkbox -->
    <div class="row">
        <div class="meta col-xs-12">
            <!-- Export all deadlines to
            <a href="https://calendar.google.com/calendar/r?cid=http://aideadlin.es/ai-deadlines.ics">Google Calendar</a>
             . -->
            <p id="system-time"></p>
        </div>
    </div>
</div>

<!-- Begin: Main content -->
{% for Comp in competitions %}
<div id="{{ Comp.comp_record_hash }}"
    class="{{ '-comp '.join(Comp.comp_scenario) }}-comp {% if Comp.prize_currency %}{% else %}un{% endif %}rewarded-comp">
    <div class="row">
        <div class="col-xs-12 col-sm-6">
            <a href="{{ url_for('competition-operator.competition_detail_view', comp_record_hash=Comp.comp_record_hash) }}"><b>{{ Comp.comp_title }}</b></a>
            <div class="meta">{{ Comp.comp_range }}
                // Host by 
                {% for host in Comp.comp_host %}
                {% if loop.index > 1 %}
                &
                {% endif %}
                <a href="{{ host.comp_host_url }}">{{ host.comp_host_name }}</a>
                {% endfor %}
                {% if Comp.prize_currency %}
                // Prize: {{ Comp.prize_amount }} {{ Comp.prize_currency }}
                {% else %}
                {% endif %}</div>
            {% if Comp.comp_description %}
             <div class="note"><b>Note</b>: {{ Comp.comp_description | safe }} <!-- safe 渲染时不转义 -->
                <!-- More info <a href="http://baidu.com">here</a> -->
            </div>
            {% endif %}
            <b>Published by</b>:
            <a href="{{ url_for('competition-operator.competition_list_view', user_id=Comp.contributor_id) }}">
                {{ Comp.account_nickname | safe }} <!-- safe 渲染时不转义 -->
            </a>
        </div>
        <div class="col-xs-12 col-sm-6">
            {% if Comp.deadline != 'No deadline' %}
            <span class="timer"></span>
            <div class="deadline">
                <div>Entry Deadline: <span class="deadline-time"></span></div>
            </div>
            <div class="calendar"></div>
            {% else %}
            <div>No Deadline.</div>
            {% endif %}
        </div>
    </div>
    <hr>
</div>
{% endfor %}
<!-- End: Main content -->

<!-- https://clustrmaps.com/ -->
<script type='text/javascript' id='clustrmaps'
    src='//cdn.clustrmaps.com/map_v2.js?cl=080808&w=557&t=tt&d=mmxT7aC-Q0y6XjIG4NnfnrS0FBgO6N7mGMI7h0MB_OM&co=ffffff&ct=808080&cmo=3acc3a&cmn=ff5353'>
</script>
{% endblock %}




{% block script_js %}
{{ super() }}
<!-- navbar; myBtn -->
<script type="text/javascript" charset="utf-8" src=".{{ url_for('.static', _external = False, filename='js/Nav_Btn.js') }}"></script>
<!-- system-time -->
<script type="text/javascript" charset="utf-8" src=".{{ url_for('.static', _external = False, filename='js/ShowSysTime.js') }}"></script>
<script type="text/javascript" charset="utf-8" src=".{{ url_for('.static', _external = False, filename='js/Cookies_Refresh.js') }}"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-134245065-1"></script>
<script type="text/javascript" charset="utf-8" src=".{{ url_for('.static', _external = False, filename='js/Google_Analytics.js') }}"></script>

<!-- form :checkbox ; /?sub= -->
<script type="text/javascript" charset="utf-8" src=".{{ url_for('.static', _external = False, filename='js/Checkboxes.js') }}"></script>

<script> // Begin: Deadline Control + Calendar
$(function() {
    // https://github.com/carlsednaoui/add-to-calendar-buttons
    {% for Comp in competitions %}
        {% if Comp.deadline != 'No deadline' %}
    // adjust date according to deadline timezone
    //   var timezone = "Etc/GMT-8" ;
    //   var timezone = "Asia/Shanghai" ;
    var timezone = "{{ Comp.timezone }}" ;
    var compDate = moment.tz("{{ Comp.deadline }}", timezone);

    // render countdown timer
    $('#{{ Comp.comp_record_hash }} .timer').countdown(compDate.toDate(), function(event) {
        $(this).html(event.strftime('%D days %Hh %Mm %Ss'));
    });
    $('#{{ Comp.comp_record_hash }} .deadline-time').html(compDate.toString());
    // add calendar button
    var myCalendar = createCalendar({
        options: {
        class: 'calendar-obj',
        // You can pass an ID. If you don't, one will be generated for you
        id: '{{ Comp.comp_record_hash }}'
        },
        data: {
        // Event title
        title: '[Entry Deadline] {{ Comp.comp_title }}',
        // Event start date
        start: compDate.toDate(), 
        end: compDate.toDate(), 
            // You can also choose to set an end time
            // If an end time is set, this will take precedence over duration
            // end: new Date('June 15, 2013 23:00'),
        // Event duration (IN MINUTES)
        duration: 60,
            // Event Description
            description: '{{ Comp.comp_description }}'
        }
    });
    document.querySelector('#{{ Comp.comp_record_hash }} .calendar').appendChild(myCalendar);
    //console.log(myCalendar);
    // check if date has passed, add 'past' class to it
    var today = moment();
    if (today.diff(compDate) > 0)
        $('#{{ Comp.comp_record_hash }}').addClass('past');
        {% endif %}
    {% endfor %}

});    // End: Deadline Control + Calendar
</script>

{% endblock %}


<!-- 完整的 JavaScript 参考手册：http://www.w3school.com.cn/jsref/index.asp
- JavaScript 本地对象和内置对象
- Browser 对象（BOM）
- HTML DOM 对象 -->

<!-- HTML DOM Style 对象参考手册：http://www.w3school.com.cn/jsref/dom_obj_style.asp -->

<!-- $() = document.getElementById() -->